"use client";

import { useMediaQuery } from "@/hooks/use-media-query";
import { motion, useInView } from "framer-motion";
import { useRef } from "react";

const transition = {
  duration: 4,
  yoyo: Number.POSITIVE_INFINITY,
  ease: "easeInOut",
};
const d =
  "M18.46,341.17c34.24-31.74,71.25-63.43,93.2-105.49,3.03-5.81,7-13.59,5.37-20.36-2.42-10.05-15.55-8-22.41-4.53-19.55,9.9-34.79,26.72-48.78,43.12-14.17,16.61-25.36,35.4-33.13,55.82-3.91,10.27-6.97,20.87-9.12,31.64-2.21,11.03-4.29,23.02-3.38,34.3s8.14,23.47,21.11,21.58c10.96-1.6,21.84-9.04,30.06-16.11,15.79-13.58,28.88-31.18,39.97-48.69,34.68-54.8,68.26-110.35,102.41-165.48l-9.86,11.31c-10.62,22.31-21.4,44.53-32.16,66.78-5.19,10.74-10.09,21.68-13.45,33.15-1.54,5.24-2.73,10.59-3.6,15.98-.92,5.74-2.2,12.24-.99,18.01.85,4.02,3.44,8.11,7.7,9.05,5.48,1.2,10.31-3.34,14.04-6.66,7.85-6.98,15.3-14.42,22.4-22.15,13.92-15.14,27.16-30.95,39.25-47.59,14.67-20.18,27.87-41.36,40.98-62.56l-9.86,11.31c-8.3,16.38-16.47,32.83-24.93,49.13-7.45,14.36-15.74,28.29-22.72,42.9-3.53,7.37-6.73,14.91-9.23,22.69-1.77,5.51-5.79,14.93-1.61,20.19,4.53,5.7,13.31,1.35,17.8-2.04,5.41-4.07,9.7-9.73,14.08-14.83,12.32-14.35,22.87-30.38,34.36-45.4l-9.69,11.09c-2.2,5.35-6.41,16.78-2.55,22.3s14.35-1.87,18.11-4.65c11.31-8.39,20.4-20.67,28.97-31.7l-9.69,11.09c-4.55,9.44,6.59,17.46,14.17,10.41,3.56-3.31,6.76-7.44,9.79-11.24.96-1.21,2.07-2.5,2.71-3.9l-3.39,3.97c-4.09,3.61-4.89,4.79-2.42,3.55,1.35.29,2.62.1,4.04.65,5.09,1.98,8.71,2.95,13.45-.77,4.04-3.17,7.33-7.83,10.61-11.74,7.22-8.63,10.63-20.44,15.01-30.67,21.36-49.91,42.72-99.81,64.08-149.72,12.11-28.3,24.23-56.6,36.34-84.9l-9.86,11.31c-12.76,31.08-24.42,62.59-36.48,93.94-11.97,31.12-25.55,61.7-36.29,93.28-5.07,14.92-9.11,30.04-12.41,45.45-2.47,11.55-7.65,32.64,6.29,39.36,11.58,5.58,26.96-7.46,34.8-14.85,8.8-8.29,16.78-17.83,24.15-27.39,8.65-11.23,16.2-23.24,24.66-34.61,11.21-15.06,22.46-30.09,33.69-45.14l-9.86,11.31c-4.02,8.6-8.03,17.21-12.05,25.81-4.36,9.35-12.9,37.33,6.65,34.4,4.44-.67,8.63-2.7,12.6-4.7,3.66-1.85,8.53-5.56,12.79-5.66,4.68-.12,5.31,5.77,9.64,6.88,5.52,1.42,12.49.54,18.16.71,6.63.2,12.49.09,17.47-4.77,1.8-1.76,3.55-3.58,5.32-5.36,16.31-16.42,32.61-32.84,48.92-49.26,4.31-4.34,8.62-8.67,12.92-13.01,5.26-5.3,10.49-10.64,15.78-15.92,3.06-3.04,6.13-6.07,9.25-9.04,1.35-1.28,2.7-2.55,4.08-3.8.87-.79,2.72-3.02,1.47-.78-2.1,3.74-5.48,7.14-8.06,10.58-3.27,4.36-6.49,8.75-9.63,13.2-6.19,8.75-12.23,17.71-17.22,27.22-4.33,8.25-10.57,21.11-.2,27.45,5.02,3.07,11.42,4.4,17.09,5.67,7.11,1.6,14.34,2.63,21.55,3.66l9.86-11.31c-7.59,4.53-15.37,8.77-23.53,12.2-8.84,3.71-17.97,5.99-27.27,8.22-19.42,4.66-38.84,9.31-58.26,13.97-38.59,9.25-77.26,18.21-115.61,28.4-75.63,20.08-149.58,44.87-223.14,71.46-42.07,15.21-84.14,30.42-126.21,45.63-1.64.59-3.84,4.29-4.98,5.6s-3.25,5.16-4.87,5.7c6.62-2.21,13.54-2.68,20.39-3.8,8.33-1.36,16.61-3.08,24.9-4.63,16.19-3.04,32.39-6.06,48.59-9.05,31.87-5.89,63.75-11.72,95.63-17.59,63.7-11.72,127.68-21.68,191.68-31.62,18.27-2.84,36.54-5.68,54.81-8.51,9.14-1.42,18.27-2.84,27.41-4.26,4.57-.71,9.14-1.42,13.7-2.13,3.42-.53,7.3-.46,10.55-1.64l9.86-11.31c-14.02,7.43-28.02,14.62-42.39,21.35-11.89,5.57-21.97,12.29-29.56,23.27-8.06,11.67,23.73,18.67,30.76,19.06,13.64.75,30.67-3.29,41.14-12.44,3.74-3.27,6.14-8.06,9.86-11.31-10.46,9.15-27.5,13.21-41.14,12.44-6.99-.39-13.88-2.08-20.21-5.08-5.18-2.45-15.26-7.03-10.54-13.98l-9.66,11.12c7.65-7.7,19.39-11.71,29.06-16.14,11.2-5.13,21.96-11.23,32.84-16.99,1.82-.96,3.63-4.06,4.98-5.6,1.15-1.32,3.21-5.1,4.87-5.7-2.71.98-5.75.92-8.6,1.34-3.92.57-7.83,1.22-11.75,1.82-8.48,1.32-16.97,2.64-25.45,3.95-16.31,2.53-32.63,5.07-48.94,7.6-31.99,4.97-63.99,9.89-95.96,15.01-63.98,10.24-127.66,22.12-191.38,33.87-18.17,3.35-36.33,6.71-54.48,10.12-9.05,1.7-18.09,3.42-27.14,5.08-7.99,1.46-16.23,1.87-23.97,4.45l-9.86,11.31c74.24-26.84,148.15-54.99,223.16-79.64,74.78-24.57,150.74-44.02,227.24-62.37,21.69-5.2,43.37-10.4,65.06-15.6,10.4-2.49,20.94-4.63,30.96-8.45s18.75-8.55,27.6-13.83c1.86-1.11,3.57-3.98,4.98-5.6.58-.66,4.1-5.81,4.87-5.7-6.9-.98-13.81-1.95-20.62-3.45-5.97-1.31-12.73-2.67-18.02-5.88-10.38-6.32-4.11-19.23.2-27.45,9.82-18.72,23.08-35.7,35.98-52.36l.16-.22c-13,11.03-24.56,23.81-36.57,35.9s-24.61,24.78-36.91,37.17c-8.73,8.8-17.14,18.2-26.34,26.52-6,5.43-14.58,3.99-22.02,3.78-4.22-.12-9.46.58-13.5-.77-3.52-1.17-4.01-5.83-7.59-6.61-2.97-.65-6.62,1.75-9.15,3.05-3.38,1.73-6.72,3.57-10.23,5.04-5.51,2.3-14.11,4.7-18.08-1.49-3.67-5.71-1.16-16.44.65-22.23,1.22-3.92,3.07-7.59,4.8-11.31,3.57-7.65,7.14-15.3,10.71-22.95-.9,1.93-3.57,3.98-4.98,5.6-1.64,1.88-3.38,3.71-4.87,5.7-16.77,22.47-33.58,44.86-49.66,67.82-3.73,5.33-7.99,10.32-11.67,15.66,5.38-7.8,3.61-4.04,1.52-1.9-1.32,1.35-2.68,2.67-4.07,3.95-2.17,1.98-4.43,3.87-6.8,5.62-8.88,6.56-24.02,15.38-32.36,3.39-7.75-11.13-2.35-27.62.23-39.61,3.13-14.61,7.38-28.96,12.27-43.08,10.07-29.09,22.51-57.31,33.6-86.02,12.7-32.85,24.86-65.91,38.24-98.5-.77,1.87-3.64,4.06-4.98,5.6-1.46,1.68-3.98,3.63-4.87,5.7-36.21,84.6-72,169.38-108.63,253.8-.97,2.23-2.1,4.34-3.13,6.53-2.11,4.45,9.01-7.72,4.85-5.48-1.3.7-2.41,1.49-3.85,1.91-2.08.61-4.15.62-6.19-.13-2.26-.82-4.26-2.83-6.86-2.09-3.58,1.02-6.69,6.39-8.92,8.97-2.59,2.99-4.77,6.03-7.05,9.24l.64-.8-.77.92,9.21-10.51c-7.63,6.95-18.41-1.41-13.98-10.6-.8,1.66-3.13,3.49-4.33,4.85-1.8,2.06-3.69,4.08-5.37,6.24s-3.43,4.04-4.9,6.18c5.29-7.76,2.32-2.72.08-.65-.76.7-1.54,1.39-2.34,2.06-4.06,3.39-8.82,6.56-13.94,8.04-12.97,3.76-6.27-18.35-4.05-23.77-.66,1.6-3.22,3.59-4.33,4.85-1.8,2.06-3.71,4.07-5.37,6.24-5.9,7.71-11.75,15.46-17.54,23.25-3.06,4.12-6.11,8.24-9.14,12.38-.76,1.03-1.52,2.07-2.27,3.11-3.15,4.08-2.21,3.02,2.82-3.15-1.68,1.06-3.08,2.68-4.78,3.77-5.74,3.68-16.39,6.02-17.57-3.5-.99-7.94,3.63-17.74,6.46-24.95,6.91-17.58,16.6-33.89,25.51-50.5,9.77-18.21,18.82-36.82,28.16-55.24-2.16,4.26-7.31,7.19-9.86,11.31-10.27,16.61-20.59,33.2-31.64,49.31-5.74,8.37-11.67,16.61-17.88,24.64-3.15,4.08-6.38,8.1-9.68,12.05-1.84,2.2,1.43-1.57-.49.57-.98,1.09-1.98,2.17-2.98,3.24-1.76,1.89-3.55,3.77-5.36,5.61-3.79,3.87-7.67,7.65-11.66,11.32-3.39,3.12-6.93,6.93-11.24,8.78-10.56,4.53-14.53-7.15-14.06-15.39,1.21-21.19,9.21-41.09,18.33-59.97,10.75-22.24,21.53-44.47,32.16-66.78-.92,1.94-3.56,3.97-4.98,5.6-1.6,1.83-3.59,3.63-4.87,5.7-26.9,43.42-53.93,86.76-80.72,130.26-11.49,18.66-22.19,38.26-35.77,55.52-1.76,2.24-4.44,3.86,2.2-2.33-.72.67-1.38,1.47-2.06,2.17-2.02,2.07-4.13,4.05-6.32,5.94-3.77,3.25-7.81,6.2-12.09,8.73-8.01,4.74-19.54,10.86-28.58,5.51s-10.98-17.08-10.57-26.97c.4-9.56,1.8-19.14,3.74-28.51,3.98-19.1,10.76-37.65,20.18-54.75,4.78-8.67,10.24-16.99,16.41-24.74.77-.97,1.58-1.92,2.35-2.89-5.42,6.86-3.13,3.65-1.55,2,1.83-1.9,3.71-3.76,5.64-5.56,3.62-3.39,7.4-6.61,11.34-9.62,7.36-5.65,17.02-13.6,26.67-14.01,6.74-.28,12.65,3.34,12.69,10.46.04,7.08-3.77,14.17-7.12,20.18-4.39,7.87-9.23,15.56-14.55,22.83-14.43,19.71-37.55,38.87-57.49,57.35-3.65,3.39-6.22,7.94-9.86,11.31h0Z";

export type SignatureProps = { className?: string };
export const Signature = ({ className }: SignatureProps) => {
  const ref = useRef<SVGPathElement>(null);
  const isMobile = useMediaQuery("(max-width: 768px)");
  const isInView = useInView(ref, { once: true });
  const shouldAnimate = isMobile || isInView;
  return (
    <svg
      viewBox="0 0 640.64 397.44"
      xmlns="http://www.w3.org/2000/svg"
      width={640.64}
      height={397.44}
      className={className}
    >
      <defs>
        <clipPath id="signature-clip">
          <motion.path
            initial={{ pathLength: 0 }}
            animate={{ pathLength: shouldAnimate ? 1 : 0 }}
            transition={transition}
            d={d}
          />
        </clipPath>
      </defs>

      <motion.path
        ref={ref}
        fill="none"
        stroke="currentColor"
        strokeWidth={2}
        initial={{ pathLength: 0 }}
        animate={{ pathLength: shouldAnimate ? 1 : 0 }}
        transition={transition}
        d={d}
      />

      <motion.rect
        x="0"
        y="0"
        width="100%"
        height="100%"
        fill="currentColor"
        clipPath="url(#signature-clip)"
        initial={{ opacity: 0 }}
        animate={{ opacity: shouldAnimate ? 1 : 0 }}
        transition={transition}
      />
    </svg>
  );
};
